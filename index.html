<script>
// …중략…

function drawWheel(){
  const n = items.length || 1;
  gSlices.innerHTML = '';
  gLabels.innerHTML = '';
  const slice = 360 / n;

  for (let i = 0; i < n; i++){
    const start = i*slice - 90;
    const end   = (i+1)*slice - 90;
    const x1 = 48*Math.cos(deg2rad(start)), y1 = 48*Math.sin(deg2rad(start));
    const x2 = 48*Math.cos(deg2rad(end)),   y2 = 48*Math.sin(deg2rad(end));
    const large = slice > 180 ? 1 : 0;

    // 부채꼴 조각
    const p = document.createElementNS('http://www.w3.org/2000/svg','path');
    p.setAttribute('d', `M0 0 L ${x1} ${y1} A 48 48 0 ${large} 1 ${x2} ${y2} Z`);
    p.setAttribute('fill', PASTELS[i % PASTELS.length]);
    gSlices.appendChild(p);

    // ===== 라벨(스샷처럼 보이게) =====
    // 1) 중앙각
    const mid = start + slice/2;            // 12시 기준
    // 2) 라벨 위치(반지름 약간 안쪽)
    const rLabel = 28;
    const rx = rLabel*Math.cos(deg2rad(mid));
    const ry = rLabel*Math.sin(deg2rad(mid));

    // 3) 글자 각도: 접선 방향(= 중앙각과 같은 회전) + '항상 정방향' 보정
    //    화면 각도 0°가 12시이므로, 90~270°(아래쪽)인 경우 180°를 더해 뒤집습니다.
    let angle = mid;
    const norm = (angle % 360 + 360) % 360;
    if (norm > 90 && norm < 270) angle += 180;

    const t = document.createElementNS('http://www.w3.org/2000/svg','text');
    t.setAttribute('x', rx);
    t.setAttribute('y', ry);
    t.setAttribute('text-anchor','middle');
    t.setAttribute('dominant-baseline','middle');
    t.setAttribute('font-size','6');        // 보기 좋게 조금 크게
    t.setAttribute('font-weight','700');
    t.setAttribute('fill', '#111');
    t.setAttribute('transform', `rotate(${angle} ${rx} ${ry})`);

    const label = (items[i] ?? '').toString().trim() || '항목';
    t.textContent = label.length > 6 ? label.slice(0,6)+'…' : label;
    gLabels.appendChild(t);
  }
}
// …중략…
</script>
