<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>어떤 재료를 사용할까요?</title>
<style>
  body { font-family: sans-serif; background:#f5f5f5; margin:0; padding:20px; text-align:center; }
  h1 { margin-bottom: 10px; }
  #wheel { width:320px; height:320px; margin:20px auto; border-radius:50%; border:6px solid #333; position:relative; }
  #spin { margin:15px; padding:12px 24px; font-size:16px; cursor:pointer; border:none; border-radius:8px; background:#4f46e5; color:#fff; }
  #result { font-weight:bold; margin-top:10px; font-size:18px; }
  textarea { width:90%; max-width:400px; height:120px; margin-top:20px; padding:10px; border-radius:8px; border:1px solid #ccc; }
  button.secondary { margin-top:8px; padding:8px 16px; border:none; border-radius:6px; background:#eee; cursor:pointer; }
</style>
</head>
<body>

<h1>어떤 재료를 사용할까요?</h1>

<div id="wheel"></div>
<button id="spin">돌리기</button>
<div id="result">결과가 여기에 표시됩니다</div>

<div>
  <h3>재료 항목 편집</h3>
  <p>기본 항목: 병뚜껑, 종이, 빨대</p>
  <textarea id="items"></textarea><br>
  <button class="secondary" id="apply">적용하기</button>
  <button class="secondary" id="reset">기본값으로 리셋</button>
</div>

<script>
  const DEFAULT_ITEMS = ["병뚜껑", "종이", "빨대"];
  let items = [...DEFAULT_ITEMS];
  const wheel = document.getElementById("wheel");
  const result = document.getElementById("result");

  function drawWheel() {
    wheel.innerHTML = "";
    const n = items.length;
    const angle = 360 / n;
    for (let i = 0; i < n; i++) {
      const slice = document.createElement("div");
      slice.style.position = "absolute";
      slice.style.width = "50%";
      slice.style.height = "50%";
      slice.style.top = "50%";
      slice.style.left = "50%";
      slice.style.transformOrigin = "0% 0%";
      slice.style.transform = `rotate(${i*angle}deg) skewY(${90-angle}deg)`;
      slice.style.background = `hsl(${i*360/n},80%,70%)`;
      wheel.appendChild(slice);
    }
  }

  function spinWheel() {
    if (!items.length) return;
    const deg = 360 * 5 + Math.floor(Math.random() * 360);
    wheel.style.transition = "transform 4s cubic-bezier(.17,.67,.83,.67)";
    wheel.style.transform = `rotate(${deg}deg)`;
    const index = Math.floor(((360 - (deg % 360)) / (360/items.length)) % items.length);
    setTimeout(() => { result.textContent = `선택된 재료: ${items[index]}`; }, 4000);
  }

  document.getElementById("spin").addEventListener("click", spinWheel);
  document.getElementById("apply").addEventListener("click", () => {
    const text = document.getElementById("items").value.trim();
    if (text) items = text.split(/\n|,/).map(s=>s.trim()).filter(Boolean);
    drawWheel();
    result.textContent = "새 항목이 적용되었습니다!";
  });
  document.getElementById("reset").addEventListener("click", () => {
    items = [...DEFAULT_ITEMS];
    document.getElementById("items").value = items.join("\n");
    drawWheel();
    result.textContent = "기본 항목으로 리셋되었습니다!";
  });

  // 초기화
  document.getElementById("items").value = items.join("\n");
  drawWheel();
</script>
</body>
</html>
